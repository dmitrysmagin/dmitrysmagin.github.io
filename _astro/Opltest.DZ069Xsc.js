import{i as G,e as x,a as M,o as K}from"./index-client.tsK4lyVm.js";import{k as Q,h as B,o as D,q as V,u as I,v as $,w as W,H as X,x as U,y as Z,z as ee,A as ae,B as te,C as H,D as re,E as ie,F as ne,G as se,I as le,S as Y,J as fe,L as ue,K as de,M as oe,N as ve,P as ce,i as c,p as j,O as L,c as R,d as q,r as p,j as z,f as P,Q as _e,R as me,t as he,s as E,m as F,e as b}from"./template.DbDNjTn5.js";import{e as A,s as be}from"./render.c7LLCqJ5.js";/* empty css                      */function ge(e,a,d,s,o){var r=e,u="",v;Q(()=>{if(u===(u=a()??"")){B&&D();return}v!==void 0&&(te(v),v=void 0),u!==""&&(v=V(()=>{if(B){I.data;for(var t=D(),i=t;t!==null&&(t.nodeType!==8||t.data!=="");)i=t,t=$(t);if(t===null)throw W(),X;U(I,i),r=Z(t);return}var l=u+"",n=ee(l);U(ae(n),n.lastChild),r.before(n)}))})}function pe(e,a,d){var s=H(e,a);s&&s.set&&(e[a]=d,re(()=>{e[a]=null}))}function k(e,a){return e===a||e?.[Y]===a}function N(e={},a,d,s){return ie(()=>{var o,r;return ne(()=>{o=r,r=s?.()||[],se(()=>{e!==d(...r)&&(a(e,...r),o&&k(d(...o),e)&&a(null,...o))})}),()=>{le(()=>{r&&k(d(...r),e)&&a(null,...r)})}}),e}let T=!1;function ye(e){var a=T;try{return T=!1,[e(),T]}finally{T=a}}function C(e,a,d,s){var o=!ve||(d&ce)!==0,r=!1,u;[u,r]=ye(()=>e[a]);var v=Y in e||oe in e,t=(H(e,a)?.set??(v&&a in e&&(f=>e[a]=f)))||void 0,i=s,l=!0,n=()=>(l&&(l=!1,i=s),i);u===void 0&&s!==void 0&&(t&&o&&fe(),u=n(),t&&t(u));var m;if(o)m=()=>{var f=e[a];return f===void 0?n():(l=!0,f)};else{var g=de(()=>e[a]);g.f|=ue,m=()=>{var f=c(g);return f!==void 0&&(i=void 0),f===void 0?i:f}}return m}var Pe=L('<span class="cell svelte-1eu96vz"><!></span>'),we=L("<!> <br>",1),Ae=L('<div class="text-matrix-container svelte-1eu96vz"></div>');function Te(e,a){j(a,!1);let d=C(a,"width",8,10),s=C(a,"height",8,10),o=Array(s()).fill(0).map((v,t)=>Array(d()).fill(0).map((i,l)=>({row:t,col:l,contents:"&nbsp;",element:null})));function r(v,t,i){if(typeof i=="string")for(let l=0;l<i.length;l++){let n=o[t][l+v];const m=i[l]!==" "?i[l]:"&nbsp;";n&&(n.contents=m),n&&n.element&&n.element.innerHTML&&(n.element.innerHTML=n.contents)}}r(0,0,"╭──────╮"),r(0,1,"│╱┤DLiB│"),r(0,2,"┏━━━━┳━STATUS▪▫▪ PPP│"),r(0,3,"┃▸00◂┃G-1 2B ▪▪▪ 203│"),r(0,4,"┃ 01 ┃··· •• ▪▪▪ 203│"),G();var u=Ae();return x(u,5,()=>o,M,(v,t)=>{var i=we(),l=z(i);x(l,1,()=>c(t),M,(n,m,g)=>{var f=Pe(),w=P(f);ge(w,()=>c(m).contents),p(f),N(f,(y,O)=>(O.element=y,_e(()=>c(t))),y=>y?.element,()=>[c(m)]),R(n,f)}),me(2),R(v,i)}),p(u),R(e,u),pe(a,"printAscii",r),q({printAscii:r})}var Re=L(`<div><h2>OPL3 emulation test</h2> <p>This is a demo of <a href="https://github.com/doomjs/opl3">Doomjs's OPL3 emulation engine.</a></p> <div> </div> <div><label for="fileUpload">Select a file:</label> <input type="file" id="fileUpload" name="fileUpload" accept=".rad,.raw,.dro,.laa,.mus,.imf"></div> <div><button>Stop</button> <button>Pause</button> <button>Resume</button></div></div> <!>`,1);function Fe(e,a){j(a,!1);let d=F(),s=F(),o=F("");function r(_){const h=new FileReader;return new Promise((S,J)=>{h.onerror=()=>{h.abort(),J(new Error("Problem parsing input file"))},h.onload=()=>{S(h.result)},h.readAsArrayBuffer(_)})}async function u(_){if(_ instanceof FileList&&_.length){var h=_[0],S=await r(h);c(s).play(S)}}K(()=>{E(s,new OPL3.Player(null,{prebuffer:3e3,volume:4})),c(s).on("currentTime",_=>{E(o,`currentFrame: ${_.currentFrame}, currentTime: ${_.currentTime.toFixed(2)} s`)}),c(d).printAscii(0,5,"From outside")}),G();var v=Re(),t=z(v),i=b(P(t),4),l=P(i,!0);p(i);var n=b(i,2),m=b(P(n),2);p(n);var g=b(n,2),f=P(g),w=b(f,2),y=b(w,2);p(g),p(t);var O=b(t,2);N(Te(O,{width:36,height:10,$$legacy:!0}),_=>E(d,_),()=>c(d)),he(()=>be(l,c(o))),A("change",m,_=>u(_.target.files)),A("click",f,()=>c(s).stop()),A("click",w,()=>c(s).pause()),A("click",y,()=>c(s).resume()),R(e,v),q()}export{Fe as default};
