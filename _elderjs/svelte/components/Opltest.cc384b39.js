import{S as e,i as a,s as r,k as s,l as t,t as o,m as i,p as n,b as c,d as l,q as f,r as u,e as d,u as p,g as m,f as h,v,w as E,n as P,x as T,o as b}from"../index-4d03d9a8.js";function g(e){let a,r,b,g,j,w,y,L,O,U,x,D,I,S,B,F,k,A,N,R,V,$,q,C,H,z,G,J,K,M,Q,W;return{c(){a=s("script"),b=t(),g=s("div"),j=s("h2"),w=o("OPL3 emulation test"),y=t(),L=s("p"),O=o("This is a demo of "),U=s("a"),x=o("Doomjs's OPL3 emulation engine."),D=t(),I=s("div"),S=o(e[1]),B=t(),F=s("div"),k=s("label"),A=o("Select a file:"),N=t(),R=s("input"),V=t(),$=s("div"),q=s("button"),C=o("Stop"),H=t(),z=s("button"),G=o("Pause"),J=t(),K=s("button"),M=o("Resume"),this.h()},l(r){const s=i("svelte-dp4agw",document.head);a=n(s,"SCRIPT",{id:!0,type:!0,src:!0}),c(a).forEach(l),s.forEach(l),b=f(r),g=n(r,"DIV",{});var t=c(g);j=n(t,"H2",{});var o=c(j);w=u(o,"OPL3 emulation test"),o.forEach(l),y=f(t),L=n(t,"P",{});var d=c(L);O=u(d,"This is a demo of "),U=n(d,"A",{href:!0});var p=c(U);x=u(p,"Doomjs's OPL3 emulation engine."),p.forEach(l),d.forEach(l),D=f(t),I=n(t,"DIV",{});var m=c(I);S=u(m,e[1]),m.forEach(l),B=f(t),F=n(t,"DIV",{});var h=c(F);k=n(h,"LABEL",{for:!0});var v=c(k);A=u(v,"Select a file:"),v.forEach(l),N=f(h),R=n(h,"INPUT",{type:!0,id:!0,name:!0,accept:!0}),h.forEach(l),V=f(t),$=n(t,"DIV",{});var E=c($);q=n(E,"BUTTON",{});var P=c(q);C=u(P,"Stop"),P.forEach(l),H=f(E),z=n(E,"BUTTON",{});var T=c(z);G=u(T,"Pause"),T.forEach(l),J=f(E),K=n(E,"BUTTON",{});var Q=c(K);M=u(Q,"Resume"),Q.forEach(l),E.forEach(l),t.forEach(l),this.h()},h(){d(a,"id","opl3"),d(a,"type","text/javascript"),p(a.src,r="/js/opl3.js")||d(a,"src","/js/opl3.js"),d(U,"href","https://github.com/doomjs/opl3"),d(k,"for","fileUpload"),d(R,"type","file"),d(R,"id","fileUpload"),d(R,"name","fileUpload"),d(R,"accept",".rad,.raw,.dro,.laa,.mus,.imf")},m(r,s){m(document.head,a),h(r,b,s),h(r,g,s),m(g,j),m(j,w),m(g,y),m(g,L),m(L,O),m(L,U),m(U,x),m(g,D),m(g,I),m(I,S),m(g,B),m(g,F),m(F,k),m(k,A),m(F,N),m(F,R),m(g,V),m(g,$),m($,q),m(q,C),m($,H),m($,z),m(z,G),m($,J),m($,K),m(K,M),Q||(W=[v(R,"change",e[3]),v(q,"click",e[4]),v(z,"click",e[5]),v(K,"click",e[6])],Q=!0)},p(e,[a]){2&a&&E(S,e[1])},i:P,o:P,d(e){l(a),e&&l(b),e&&l(g),Q=!1,T(W)}}}function j(e,a,r){let s,t="";async function o(e){if(e instanceof FileList&&e.length){var a=e[0],r=await function(e){const a=new FileReader;return new Promise(((r,s)=>{a.onerror=()=>{a.abort(),s(new Error("Problem parsing input file"))},a.onload=()=>{r(a.result)},a.readAsArrayBuffer(e)}))}(a);s.play(r)}}b((()=>{r(0,s=new OPL3.Player(null,{prebuffer:3e3,volume:4})),s.on("currentTime",(e=>{r(1,t=`currentFrame: ${e.currentFrame}, currentTime: ${e.currentTime.toFixed(2)} s`)}))}));return[s,t,o,e=>o(e.target.files),()=>s.stop(),()=>s.pause(),()=>s.resume()]}class w extends e{constructor(e){super(),a(this,e,j,g,r,{})}}export{w as default};
