import{S as a,i as e,s,k as o,l as t,t as r,q as i,m as n,b as c,d as l,p as f,r as u,f as p,u as h,j as d,g as m,v,w as E,n as P,x as g,o as j}from"../index-6f65841d.js";function T(a){let e,s,j,T,b,w,y,L,O,U,D,I,S,x,B,k,A,N,R,V,F,q,C,H,z,G,J,K,M,Q,W,X;return{c(){e=o("script"),j=t(),T=o("div"),b=o("h2"),w=r("OPL3 emulation test"),y=t(),L=o("p"),O=r("This is a demo of "),U=o("a"),D=r("Doomjs's OPL3 emulation engine."),I=t(),S=o("div"),x=r(a[1]),B=t(),k=o("div"),A=o("label"),N=r("Select a file:"),R=t(),V=o("input"),F=t(),q=o("div"),C=o("button"),H=r("Stop"),z=t(),G=o("button"),J=r("Pause"),K=t(),M=o("button"),Q=r("Resume"),this.h()},l(s){const o=i('[data-svelte="svelte-dp4agw"]',document.head);e=n(o,"SCRIPT",{id:!0,type:!0,src:!0}),c(e).forEach(l),o.forEach(l),j=f(s),T=n(s,"DIV",{});var t=c(T);b=n(t,"H2",{});var r=c(b);w=u(r,"OPL3 emulation test"),r.forEach(l),y=f(t),L=n(t,"P",{});var p=c(L);O=u(p,"This is a demo of "),U=n(p,"A",{href:!0});var h=c(U);D=u(h,"Doomjs's OPL3 emulation engine."),h.forEach(l),p.forEach(l),I=f(t),S=n(t,"DIV",{});var d=c(S);x=u(d,a[1]),d.forEach(l),B=f(t),k=n(t,"DIV",{});var m=c(k);A=n(m,"LABEL",{for:!0});var v=c(A);N=u(v,"Select a file:"),v.forEach(l),R=f(m),V=n(m,"INPUT",{type:!0,id:!0,name:!0,accept:!0}),m.forEach(l),F=f(t),q=n(t,"DIV",{});var E=c(q);C=n(E,"BUTTON",{});var P=c(C);H=u(P,"Stop"),P.forEach(l),z=f(E),G=n(E,"BUTTON",{});var g=c(G);J=u(g,"Pause"),g.forEach(l),K=f(E),M=n(E,"BUTTON",{});var W=c(M);Q=u(W,"Resume"),W.forEach(l),E.forEach(l),t.forEach(l),this.h()},h(){p(e,"id","opl3"),p(e,"type","text/javascript"),h(e.src,s="/js/opl3.js")||p(e,"src","/js/opl3.js"),p(U,"href","https://github.com/doomjs/opl3"),p(A,"for","fileUpload"),p(V,"type","file"),p(V,"id","fileUpload"),p(V,"name","fileUpload"),p(V,"accept",".raw,.dro,.laa,.mus,.imf")},m(s,o){d(document.head,e),m(s,j,o),m(s,T,o),d(T,b),d(b,w),d(T,y),d(T,L),d(L,O),d(L,U),d(U,D),d(T,I),d(T,S),d(S,x),d(T,B),d(T,k),d(k,A),d(A,N),d(k,R),d(k,V),d(T,F),d(T,q),d(q,C),d(C,H),d(q,z),d(q,G),d(G,J),d(q,K),d(q,M),d(M,Q),W||(X=[v(V,"change",a[3]),v(C,"click",a[4]),v(G,"click",a[5]),v(M,"click",a[6])],W=!0)},p(a,[e]){2&e&&E(x,a[1])},i:P,o:P,d(a){l(e),a&&l(j),a&&l(T),W=!1,g(X)}}}function b(a,e,s){let o,t="";async function r(a){if(a instanceof FileList&&a.length){var e=a[0],s=await function(a){const e=new FileReader;return new Promise(((s,o)=>{e.onerror=()=>{e.abort(),o(new Error("Problem parsing input file"))},e.onload=()=>{s(e.result)},e.readAsArrayBuffer(a)}))}(e);o.play(s)}}j((()=>{s(0,o=new OPL3.Player(null,{prebuffer:3e3,volume:4})),o.on("progress",(function(){s(1,t=o.position+"ms / "+o.length+"ms")})),o.on("position",(function(a){s(1,t=a+"ms / "+o.length+"ms")}))}));return[o,t,r,a=>r(a.target.files),()=>o.stop(),()=>o.pause(),()=>o.resume()]}class w extends a{constructor(a){super(),e(this,a,b,T,s,{})}}export{w as default};
